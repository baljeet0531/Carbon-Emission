<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <meta property="og:title" content="Carbon">
    <meta property="og:image" content="./src/co2_icon.jpg">
    <meta property="og:description" content="">

    <link href="./src/style.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=DM Sans' rel='stylesheet'>
    <link rel="icon" type="image/jpeg" href="./src/co2_icon.jpg">
    <link rel="apple-touch-icon" sizes="180x180" href="./src/co2_icon.jpg" />
    <link rel="manifest" href="./manifest.json">

    <title>Carbon</title>
</head>
<meta>

<body>
    <div id="navigation_bar">
        <img id="menu_icon" src="./src/menu.png">
    </div>


    <div id="home_div" class="main_frame">
        <div id="daily_info_page" class="mySlides fade">
            <div id="vice_info">
                <p id="daily_distance_title">今日移動距離</p>
                <p id="weekly_co2e_title">週累積碳排</p>
                <p id="daily_distance_value">76 km</p>
                <p id="weekly_co2e_value">9.8 kg CO<sub>2</sub>e</p>
            </div>
            <div id="main_info">
                <p id="weekday">SUN</p>
                <p id="daily_co2e_title">今日移動碳排</p>
                <p id="daily_co2e_value">34</p>
                <p id="daily_co2e_unit">kg CO<sub>2</sub>e</p>
            </div>
        </div>
        <div id="piechart_page" class="mySlides fade">
            <div id="chart_btn_div">
                <div id="today_chart_button">
                    <p class="button">今日</p>
                </div>
                <div id="weekly_chart_button">
                    <p class="button">本週</p>
                </div>
            </div>
            <div id="chart_div"></div>
        </div>
        <div id="daily_checkin_page" class="mySlides fade">
            <div id="cont_text_div">
                <p id="cont_text">已連續<span id="cont_number">4</span>天</p>
            </div>
            <table id="checkin_table">
                <caption>簽到表</caption>
                <tr>
                    <th>MON</th>
                    <th>TUE</th>
                    <th>WED</th>
                    <th>THU</th>
                    <th>FRI</th>
                    <th>SAT</th>
                    <th>SUN</th>
                </tr>
                <tr>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                </tr>
                <tr>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                </tr>
                <tr>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                </tr>
                <tr>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                </tr>
                <tr>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                </tr>
                <tr>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                    <td><img src="./src/check.png"></td>
                </tr>
            </table>
        </div>
        <div id="dot_div" style="text-align:center">
            <span class="dot" onclick="currentSlide(1)"></span>
            <span class="dot" onclick="currentSlide(2), drawDonut()"></span>
            <span class="dot" onclick="currentSlide(3), drawTable()"></span>
        </div>
    </div>

    <div id="notification_div" class="main_frame">
        <div id="weekly_mission" class="notification_type">
            <div class="border"></div>
            <p class="notifi_title">本週任務</p>
            <p class="notifi_content">行走移動佔總移動40%</p>
        </div>
        <div id="rookie_mission" class="notification_type">
            <div class="border"></div>
            <p class="notifi_title">新手任務</p>
        </div>
        <div id="get_reward_" class="notification_type">
            <div class="border"></div>
            <p class="notifi_title">獎勵領取</p>
        </div>
        <div id="rank_notify" class="notification_type">
            <div class="border"></div>
            <p class="notifi_title">排行通知</p>
        </div>
    </div>
    <div id="reward_div" class="main_frame">
        <div class="reward">
            <div class="border"></div>
            <p class="reward_title">健身房免費使用 乙次</p>
            <p class="reward_expire_date">使用期限: 2022/04/21</p>
        </div>
    </div>
    <div id="rank_div" class="main_frame"></div>
    <div id="knowledge_div" class="main_frame">
        <div class="knowledge">
            <cdiv class="border"></cdiv>
            <p class="knowledge_title">循環週報</p>
            <p class="knowledge_content"></p>
        </div>
        <div id="QA_div" class="main_frame"></div>




        <div id="menu_list">
            <div id="home_tab" class="menu">
                <p>首頁</p>
            </div>
            <div id="notification_tab" class="menu">
                <p>通知</p>
            </div>
            <div id="reward_tab" class="menu">
                <p>獎勵領取</p>
            </div>
            <div id="rank_tab" class="menu">
                <p>排行榜</p>
            </div>
            <div id="knowledge_tab" class="menu">
                <p>知識專區</p>
            </div>
            <div id="QA_tab" class="menu">
                <p>Q&A</p>
            </div>
            <div id="logout_tab" class="menu">
                <p>登出</p>
            </div>
        </div>
        <!-- <form onsubmit="return send()" method="POST">
            <p><input id="chosen-file" type="file" value="choose file" accept=".zip,.rar,.7zip" /></p>
            <p><input type="submit" value="Submit" /></p>
        </form> -->


        <script src="./src/app.js"></script>
        <script>
            let slideIndex = 1;
            showSlides(slideIndex);

            function currentSlide(n) {
                showSlides(slideIndex = n);
            }

            function showSlides(n) {
                let i;
                let slides = document.getElementsByClassName("mySlides");
                let dots = document.getElementsByClassName("dot");
                if (n > slides.length) { slideIndex = 1 }
                if (n < 1) { slideIndex = slides.length }
                for (i = 0; i < slides.length; i++) {
                    slides[i].style.display = "none";
                }
                for (i = 0; i < dots.length; i++) {
                    dots[i].className = dots[i].className.replace(" active", "");
                }
                slides[slideIndex - 1].style.display = "block";
                dots[slideIndex - 1].className += " active";
            }
        </script>
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
        <script type="text/javascript">
            google.charts.load("current", { packages: ["corechart"] });
            google.charts.setOnLoadCallback(drawChart);

            var data, options;

            function drawChart() {
                data = google.visualization.arrayToDataTable([
                    ['Type', 'Distance'],
                    ['汽車', 30],
                    ['走路', 25],
                    ['腳踏車', 35],
                    ['機車', 10],
                ]);

                options = {
                    pieHole: 0.4,
                    legend: {
                        position: 'labeled',
                        textStyle: {
                            fontName: 'DM Sans'
                        }
                    },
                    slices: {
                        0: { color: '#1E8981' },
                        1: { color: '#5CA6A1' },
                        2: { color: '#8EC3C1' },
                        3: { color: '#BEE0E1' },
                    },
                    chartArea: {
                        left: 'calc((100vw - 274px)/2)', top: '5%', width: '80%', height: '80%'
                    },
                    pieSliceTextStyle: {
                        color: 'black',
                        fontName: 'DM Sans'
                    }
                };
            }

            var chartFirstClick = true;

            function drawDonut() {
                if (chartFirstClick) {
                    var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
                    chart.draw(data, options);
                    chartFirstClick = false;
                }
            }
        </script>
        <script>

            var tableFirstClick = true;
            var todayTD;
            function drawTable() {
                const today = new Date()
                let todayDate = today.getDate()

                const firstDate = new Date()
                firstDate.setDate(1)
                let firstWeekday = firstDate.getDay()

                firstWeekday -= 1
                if (firstWeekday == -1) {
                    firstWeekday = 6;
                }

                if (tableFirstClick) {
                    let i = 0;
                    dates_img = document.querySelectorAll("#checkin_table td img")
                    for (i = firstWeekday; i < todayDate + firstWeekday - 1; i++) {
                        dates_img[i].style.display = "block";
                    }
                    console.log(i)
                    todayTD = document.querySelectorAll("#checkin_table td")[i]
                    todayTD.style.backgroundColor = "#b8e6e3";

                    tableFirstClick = false;
                }

            }
        </script>
        <script>
            function send() {
                let chosen_file = document.getElementById("chosen-file").files[0];
                //console.log(chosen_file)
                let formData = new FormData();

                formData.append("file", chosen_file);
                fetch('/upload', { method: "POST", body: formData })
                    .then((response) => {
                        console.log(response.json());
                    }).catch((error) => {
                        console.log(error);
                    });
                return false
            }
        </script>
</body>